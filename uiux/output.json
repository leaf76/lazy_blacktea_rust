{
  "version": "1.1.0",
  "mode": "redesign_comprehensive",
  "assumptions": [
    "Users are technical (QA/engineers) but prefer clear UI over CLI memorization.",
    "Multiple devices can be connected; one selected device drives most views.",
    "Core features remain: device discovery, operations, logcat, file browsing, UI hierarchy."
  ],
  "open_questions": [],
  "decisions": [
    "Wireless ADB pairing is required (QR or pairing code).",
    "No mandatory logcat presets or tag conventions.",
    "UI Inspector includes live mirror mode plus static capture fallback."
  ],
  "ux_goals": [
    "Always show a clear next step and current device context.",
    "Progressive disclosure for advanced commands.",
    "Keyboard-first flows with visible focus states.",
    "Reduce visual clutter with consistent grouping and spacing."
  ],
  "success_metrics": [
    "First-time user completes connect + quick action in < 3 minutes.",
    "Logcat and UI Inspector reachable within 10 seconds from home.",
    "Actionable recovery guidance visible for common errors."
  ],
  "information_architecture": {
    "structure": "Persistent sidebar + top bar device context",
    "global_elements": [
      "Top Bar: Device selector, connection status, command palette",
      "Sidebar: Dashboard, Actions, Logcat, Files, UI Inspector, Apps, Settings",
      "Status indicators: ADB status, device authorization"
    ],
    "navigation_rules": [
      "If no device, show global empty state and disable device-specific modules.",
      "Device selection is always visible and keyboard accessible.",
      "Advanced actions live behind an explicit toggle or section."
    ]
  },
  "user_flows": [
    {
      "name": "Onboarding / First Run",
      "steps": [
        "App launch -> check ADB status.",
        "If ADB missing: show install steps.",
        "If no device: show connect steps (USB + wireless pairing).",
        "When device connects: auto-select and land on Dashboard."
      ]
    },
    {
      "name": "Run a Common Action",
      "steps": [
        "Select device in top bar.",
        "Go to Actions.",
        "Click a Quick Action tile (e.g., Screenshot).",
        "Show result toast + output location."
      ]
    },
    {
      "name": "Stream Logs",
      "steps": [
        "Go to Logcat.",
        "Stream auto-starts.",
        "Filter by level or tag.",
        "Pause/Resume/Clear via toolbar or shortcuts."
      ]
    },
    {
      "name": "Inspect UI Hierarchy",
      "steps": [
        "Go to UI Inspector.",
        "Choose Static Capture or Live Mirror.",
        "Capture screenshot + XML (static) or start mirror stream.",
        "View screenshot/mirror + node tree + properties.",
        "Hover/select element to sync between panes."
      ]
    },
    {
      "name": "Pair Device (Wireless)",
      "steps": [
        "Open Connect Device from empty state or top bar.",
        "Start pairing (QR or pairing code).",
        "Confirm device appears and is selectable."
      ]
    }
  ],
  "screens": {
    "dashboard": {
      "title": "Dashboard",
      "layout": "Card grid + status banner",
      "sections": [
        "Device status card (model, Android, battery, WiFi IP)",
        "Quick Actions grid",
        "Recent packages / recent log filters"
      ],
      "states": {
        "empty": "Connect a device to see status and actions.",
        "loading": "Skeleton loaders on device stats.",
        "error": "Device unauthorized. Check the device screen and allow debugging."
      }
    },
    "actions": {
      "title": "Actions",
      "layout": "Categorized tiles with advanced toggle",
      "notes": "Show only common actions by default."
    },
    "logcat": {
      "title": "Logcat",
      "layout": "Sticky filter bar + virtualized list",
      "features": [
        "Level filters and tag presets",
        "Pause/Resume/Clear",
        "Keyboard shortcuts"
      ]
    },
    "files": {
      "title": "Files",
      "layout": "Two-pane (Local | Device)",
      "interactions": "Drag and drop to push/pull files; context menu for operations."
    },
    "ui_inspector": {
      "title": "UI Inspector",
      "layout": "Three-pane: screenshot | tree | properties",
      "toolbar": "Capture, Refresh, Export, Live Mirror toggle",
      "notes": "If mirror dependency is missing, show setup guidance and fall back to static capture."
    },
    "apps": {
      "title": "Apps",
      "layout": "Searchable list with action row",
      "actions": "Launch, clear data, uninstall"
    },
    "settings": {
      "title": "Settings",
      "sections": "ADB path, wireless pairing, output locations, log options, shortcuts"
    }
  },
  "issues": [
    {
      "severity": "High",
      "problem": "No clear onboarding or starting point.",
      "solution": "Add a device-first empty state with guided setup."
    },
    {
      "severity": "High",
      "problem": "Information hierarchy is unclear.",
      "solution": "Persistent navigation and global device context."
    },
    {
      "severity": "Medium",
      "problem": "Visual clutter from mixed tasks.",
      "solution": "Dedicated screens and progressive disclosure."
    }
  ],
  "backlog": [
    {
      "priority": "P0",
      "item": "App Shell + Global Device Context",
      "desc": "Sidebar navigation, top bar device selector, status, command palette entry."
    },
    {
      "priority": "P0",
      "item": "Onboarding & Empty States",
      "desc": "First-run guidance for ADB, device connection, and next steps."
    },
    {
      "priority": "P1",
      "item": "Wireless ADB Pairing",
      "desc": "Pairing flow for QR or pairing code with clear status feedback."
    },
    {
      "priority": "P1",
      "item": "Dashboard Quick Actions",
      "desc": "Grid of common actions + recent packages/log filters."
    },
    {
      "priority": "P1",
      "item": "Actions Catalog",
      "desc": "Categorized action list with advanced toggle and input validation."
    },
    {
      "priority": "P1",
      "item": "Logcat Viewer",
      "desc": "Virtualized list, filters, pause/resume, and shortcuts."
    },
    {
      "priority": "P1",
      "item": "File Manager",
      "desc": "Two-pane file browser with push/pull and context menu."
    },
    {
      "priority": "P2",
      "item": "UI Inspector",
      "desc": "Screenshot canvas + node tree + properties panel."
    },
    {
      "priority": "P2",
      "item": "UI Inspector Live Mirror",
      "desc": "Optional live mirror mode (scrcpy or equivalent) with static capture fallback."
    },
    {
      "priority": "P2",
      "item": "Apps Manager",
      "desc": "Searchable package list with actions."
    },
    {
      "priority": "P2",
      "item": "Command Palette",
      "desc": "Global search and action launcher (Cmd/Ctrl+K)."
    },
    {
      "priority": "P3",
      "item": "Theme + Accessibility Settings",
      "desc": "Light/dark toggle, font scaling, shortcut reference."
    }
  ],
  "components": {
    "atoms": [
      "Button (Primary, Secondary, Ghost, Destructive)",
      "IconButton",
      "Badge",
      "Input",
      "Toggle",
      "Checkbox",
      "Divider",
      "Tooltip",
      "Skeleton"
    ],
    "molecules": [
      "DeviceSelector",
      "QuickActionTile",
      "FilterChip",
      "LogLine",
      "FileRow",
      "EmptyState",
      "Toast/InlineAlert"
    ],
    "organisms": [
      "SidebarNav",
      "TopBar",
      "LogFilterBar",
      "FileBrowserPane",
      "InspectorTree",
      "PropertyTable"
    ]
  },
  "design_tokens": {
    "colors": {
      "bg_app": "#F5F7FA",
      "bg_panel": "#FFFFFF",
      "bg_subtle": "#EEF2F7",
      "border": "#D7DEE8",
      "text": "#0F172A",
      "text_muted": "#5B6B7F",
      "primary": "#2563EB",
      "primary_600": "#1D4ED8",
      "accent": "#0F766E",
      "success": "#16A34A",
      "warning": "#D97706",
      "danger": "#DC2626",
      "log_info": "#2563EB",
      "log_warn": "#D97706",
      "log_error": "#DC2626"
    },
    "typography": {
      "font_ui": "IBM Plex Sans, Segoe UI, system-ui, sans-serif",
      "font_display": "Space Grotesk, IBM Plex Sans, sans-serif",
      "font_code": "JetBrains Mono, Fira Code, monospace",
      "size_xs": "12px",
      "size_sm": "13px",
      "size_md": "14px",
      "size_lg": "16px",
      "size_xl": "20px",
      "size_2xl": "24px"
    },
    "spacing": {
      "s2": "2px",
      "s4": "4px",
      "s8": "8px",
      "s12": "12px",
      "s16": "16px",
      "s24": "24px",
      "s32": "32px",
      "s48": "48px"
    },
    "radius": {
      "r6": "6px",
      "r10": "10px",
      "r14": "14px"
    },
    "elevation": {
      "card": "0 1px 2px rgba(15, 23, 42, 0.08)",
      "popover": "0 8px 24px rgba(15, 23, 42, 0.12)"
    }
  },
  "microcopy": {
    "empty_device_list": "No device connected. Plug in via USB or enable wireless debugging.",
    "wireless_pairing_hint": "Open Wireless Debugging on the device and scan the QR or enter the pairing code.",
    "adb_missing": "ADB not found. Install Android Platform Tools and restart the app.",
    "device_unauthorized": "Device unauthorized. Check the device screen and allow debugging.",
    "connect_success": "Device connected and ready.",
    "generic_error": "Something went wrong. Try reconnecting the device.",
    "empty_logcat": "No logs yet. Start an app or adjust filters.",
    "empty_files": "No files in this folder."
  },
  "rollout": {
    "phase_1": "Shell + device context + onboarding",
    "phase_2": "Dashboard, logcat, files (read-only)",
    "phase_3": "UI Inspector, apps manager, advanced actions",
    "phase_4": "Polish, accessibility, theme toggle"
  },
  "experiments": [
    "Command palette for power users (Cmd/Ctrl+K).",
    "Compact log view that hides PIDs to maximize message space."
  ]
}
